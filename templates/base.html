<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QFolders</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      :root {
        --netflix-red: #e50914;
        --netflix-dark: #141414;
        --netflix-darker: #000000;
        --netflix-gray: #333333;
        --netflix-light-gray: #666666;
        --netflix-white: #ffffff;
        --netflix-card-bg: #1a1a1a;
        --netflix-border: #333333;
      }
      
      * {
        font-family: 'Lexend', sans-serif !important;
      }
      
      body {
        background-color: var(--netflix-dark) !important;
        color: var(--netflix-white) !important;
        min-height: 100vh;
      }
      
      .navbar {
        background-color: var(--netflix-darker) !important;
        border-bottom: 1px solid var(--netflix-border) !important;
      }
      
      .navbar-brand {
        color: var(--netflix-red) !important;
        font-weight: 700 !important;
        font-size: 1.5rem !important;
      }
      
      .btn-primary {
        background-color: var(--netflix-red) !important;
        border-color: var(--netflix-red) !important;
        color: var(--netflix-white) !important;
        font-weight: 500 !important;
        border-radius: 4px !important;
        transition: all 0.3s ease !important;
      }
      
      .btn-primary:hover {
        background-color: #f40612 !important;
        border-color: #f40612 !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(229, 9, 20, 0.3) !important;
      }
      
      .btn-outline-primary {
        color: var(--netflix-red) !important;
        border-color: var(--netflix-red) !important;
        font-weight: 500 !important;
        border-radius: 4px !important;
      }
      
      .btn-outline-primary:hover {
        background-color: var(--netflix-red) !important;
        border-color: var(--netflix-red) !important;
        color: var(--netflix-white) !important;
      }
      
      .btn-outline-secondary {
        color: var(--netflix-light-gray) !important;
        border-color: var(--netflix-light-gray) !important;
        font-weight: 500 !important;
        border-radius: 4px !important;
      }
      
      .btn-outline-secondary:hover {
        background-color: var(--netflix-light-gray) !important;
        border-color: var(--netflix-light-gray) !important;
        color: var(--netflix-white) !important;
      }
      
      .card {
        background-color: var(--netflix-card-bg) !important;
        border: 1px solid var(--netflix-border) !important;
        border-radius: 8px !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
      }
      
      .form-control {
        background-color: var(--netflix-gray) !important;
        border: 1px solid var(--netflix-border) !important;
        color: var(--netflix-white) !important;
        border-radius: 4px !important;
      }
      
      .form-control:focus {
        background-color: var(--netflix-gray) !important;
        border-color: var(--netflix-red) !important;
        color: var(--netflix-white) !important;
        box-shadow: 0 0 0 0.2rem rgba(229, 9, 20, 0.25) !important;
      }
      
      .form-control::placeholder {
        color: var(--netflix-light-gray) !important;
      }
      
      .form-label {
        color: var(--netflix-white) !important;
        font-weight: 500 !important;
      }
      
      .list-group-item {
        background-color: var(--netflix-card-bg) !important;
        border: 1px solid var(--netflix-border) !important;
        color: var(--netflix-white) !important;
        transition: all 0.3s ease !important;
      }
      
      .list-group-item:hover {
        background-color: var(--netflix-gray) !important;
        transform: translateX(4px) !important;
      }
      
      .badge {
        background-color: var(--netflix-light-gray) !important;
        color: var(--netflix-white) !important;
        font-weight: 400 !important;
      }
      
      .alert {
        border-radius: 6px !important;
        border: none !important;
        font-weight: 500 !important;
        padding: 8px 12px !important;
        font-size: 0.875rem !important;
        margin-bottom: 8px !important;
        position: fixed !important;
        top: 20px !important;
        right: 20px !important;
        z-index: 1050 !important;
        max-width: 350px !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        opacity: 0 !important;
        transform: translateX(100%) !important;
        transition: all 0.3s ease !important;
      }
      
      .alert.show {
        opacity: 1 !important;
        transform: translateX(0) !important;
      }
      
      .alert .btn-close {
        padding: 0.5rem 0.5rem !important;
        margin: -0.5rem -0.5rem -0.5rem auto !important;
        font-size: 0.75rem !important;
        opacity: 0.7 !important;
        transition: opacity 0.3s ease !important;
      }
      
      .alert .btn-close:hover {
        opacity: 1 !important;
      }
      
      .alert-success {
        background-color: rgba(40, 167, 69, 0.2) !important;
        color: #28a745 !important;
        border-left: 4px solid #28a745 !important;
      }
      
      .alert-danger {
        background-color: rgba(220, 53, 69, 0.2) !important;
        color: #dc3545 !important;
        border-left: 4px solid #dc3545 !important;
      }
      
      .alert-warning {
        background-color: rgba(255, 193, 7, 0.2) !important;
        color: #ffc107 !important;
        border-left: 4px solid #ffc107 !important;
      }
      
      .alert-info {
        background-color: rgba(13, 202, 240, 0.2) !important;
        color: #0dcaf0 !important;
        border-left: 4px solid #0dcaf0 !important;
      }
      
      .text-muted {
        color: var(--netflix-light-gray) !important;
      }
      
      .text-secondary {
        color: var(--netflix-light-gray) !important;
      }
      
      a {
        color: var(--netflix-red) !important;
        text-decoration: none !important;
        transition: color 0.3s ease !important;
      }
      
      a:hover {
        color: #f40612 !important;
      }
      
      .modal-content {
        background-color: var(--netflix-card-bg) !important;
        border: 1px solid var(--netflix-border) !important;
        border-radius: 8px !important;
      }
      
      .modal-header {
        border-bottom: 1px solid var(--netflix-border) !important;
      }
      
      .modal-footer {
        border-top: 1px solid var(--netflix-border) !important;
      }
      
      .modal-title {
        color: var(--netflix-white) !important;
        font-weight: 600 !important;
      }
      
      .btn-close {
        filter: invert(1) !important;
      }
      
      .btn-danger {
        background-color: var(--netflix-red) !important;
        border-color: var(--netflix-red) !important;
        color: var(--netflix-white) !important;
        font-weight: 500 !important;
        border-radius: 4px !important;
      }
      
      .btn-danger:hover {
        background-color: #f40612 !important;
        border-color: #f40612 !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(229, 9, 20, 0.3) !important;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary mb-4">
      <div class="container">
        <a class="navbar-brand fw-semibold" href="{{ url_for('dashboard') }}">QFolders</a>
        <div class="ms-auto">
          {% if session.get('user') %}
            <span class="me-3 text-secondary">{{ session['user']['email'] }}</span>
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('logout') }}">Logout</a>
          {% else %}
            <a class="btn btn-outline-primary btn-sm me-2" href="{{ url_for('login') }}">Login</a>
            <a class="btn btn-primary btn-sm" href="{{ url_for('register') }}">Register</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <main class="container">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div>
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      // Auto-hide flash messages with smooth animations
      document.addEventListener('DOMContentLoaded', function() {
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach(function(alert, index) {
          // Add show class with slight delay for staggered animation
          setTimeout(function() {
            alert.classList.add('show');
          }, index * 100);
          
          // Auto-hide after 4 seconds
          setTimeout(function() {
            alert.style.opacity = '0';
            alert.style.transform = 'translateX(100%)';
            setTimeout(function() {
              const bsAlert = new bootstrap.Alert(alert);
              bsAlert.close();
            }, 300);
          }, 4000);
        });
      });
    </script>
  </body>
</html>
